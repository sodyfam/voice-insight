````markdown
# 열린마음협의회 PRD

## 제품 개요
| 항목 | 내용 |
| --- | --- |
| 서비스명 | **열린마음협의회 (Open-Mind Council)** |
| 목적 | 사내 직원들의 의견을 수집·답변하고, 관리자에게 **대시보드**를 통해 통계와 최신 내역을 한눈에 제공 |
| 플랫폼 | **웹(반응형)** – 데스크톱·태블릿·모바일 모두 대응 |
| 운영 대상 | **단일 관리자** (로그인·권한 분기 없음) |
| 백엔드 | **Supabase (PostgreSQL + Realtime)**, 별도 사용자 인증 없음 |

---

## 시장·문제 정의
- **의견 수집 경로 복잡** → 참여율 저하  
- **데이터 가시성 부족** → 관리자·경영진 의사결정 지연  
- **수동 집계** → 실시간 모니터링 불가, 운영 비용 증가  

> **Note:** 2024년 사내 설문 결과, 직원 62 %가 "제안이 반영되는지 알 수 없다"는 불만 표시.

---

## 핵심 지표 및 목표 (KPI)
| 분류 | 지표 | 정의 | 2025 Q4 목표 |
| --- | --- | --- | --- |
| 참여도 | 월별 제안 건수 | 월간 등록 의견 수 | **+30 %** (도입 前 대비) |
| 대응 | 평균 검토 완료 시간 | 의견 등록 ⇢ 관리자 상태 '답변완료'까지 소요 | **< 3 일** |
| 사용성 | 대시보드 새로고침 빈도 | 관리자 페이지 'Refresh' 클릭 수 | 하루 **≥ 3 회** |
| 품질 | 데이터 싱크 오류율 | 실제 DB ↔ 화면 오차 | **< 1 %** |

---

## 사용자 시나리오

### 관리자 시나리오
1. **대시보드 최초 접속**  
   - 브라우저 URL 접근 → Supabase API 호출 → 기본 통계·목록 렌더링
2. **분기별 통계 확인**  
   - 상단 헤더에서 분기 선택 → 차트 재로드
3. **계열사·카테고리 필터링**  
   - 차트 클릭 or 토글 → 연관 표·목록 동적 하이라이트
4. **최신 데이터 확인**  
   - "최근 10건" 테이블 스크롤 → 상세 모달
5. **새로고침**  
   - 헤더 🔄 버튼 → 실시간 데이터 패치 → Toast "업데이트 완료"
6. **전체 의견 조회**  
   - 헤더 네비게이션 → "전체 의견" 페이지 → 검색·필터링

### 직원 시나리오 (신규 추가)
1. **의견 등록**  
   - 헤더 네비게이션 → "의견 등록" 페이지
   - 계열사, 카테고리, 분기 선택 → 의견 내용 작성 → 제출
2. **등록 확인**  
   - 성공 Toast 메시지 → 폼 자동 초기화

---

## 기능 상세

### 1) 대시보드 (완료)
| 요구사항 | 수용 기준 (Acceptance) | 구현 상태 |
| --- | --- | --- |
| KPI 카드 3개 (총 제안수, 답변완료율, 분기별 제안수) | 실시간 데이터 반영 | ✅ 완료 |
| 분기별 의견 건수 차트 | 라인 차트로 분기별 총합 표시 | ✅ 완료 |
| 계열사별 통계 차트 | 막대 그래프로 계열사별 분포 | ✅ 완료 |
| 최근 10건 테이블 | 날짜, 계열사, 카테고리, 내용, 답변상태 | ✅ 완료 |

### 2) 의견 등록 페이지 (신규 완료)
| 요구사항 | 수용 기준 | 구현 상태 |
| --- | --- | --- |
| 계열사 선택 드롭다운 | DB에서 동적 로드 | ✅ 완료 |
| 카테고리 선택 드롭다운 | DB에서 동적 로드 | ✅ 완료 |
| 분기 선택 | Q1, Q2, Q3, Q4 고정 옵션 | ✅ 완료 |
| 의견 내용 입력 | 텍스트 에리어, 필수 입력 검증 | ✅ 완료 |
| 폼 검증 및 제출 | 모든 필드 필수, 성공/실패 Toast | ✅ 완료 |

### 3) 전체 의견 조회 페이지 (신규 완료)
| 요구사항 | 수용 기준 | 구현 상태 |
| --- | --- | --- |
| 의견 목록 표시 | 페이지네이션, 검색, 필터링 | ✅ 완료 |
| 상세 보기 모달 | 의견 내용 및 답변 상태 | ✅ 완료 |

### 4) 헤더 네비게이션 (신규 완료)
| 요구사항 | 수용 기준 | 구현 상태 |
| --- | --- | --- |
| 로고 및 서비스명 | 좌측 배치 | ✅ 완료 |
| 네비게이션 메뉴 | 대시보드, 의견 등록, 전체 의견 | ✅ 완료 |
| 분기 선택 | 대시보드에서만 표시 | ✅ 완료 |
| 새로고침 버튼 | 대시보드에서만 표시 | ✅ 완료 |
| 모바일 반응형 | 햄버거 메뉴 | ✅ 완료 |

### 5) 새로고침(Refresh) 버튼 (완료)
- API re-fetch + 로딩 스피너  
- 30초 이내 응답 실패 → 에러 Toast

---

## 데이터 흐름 요약
```mermaid
flowchart LR
    Browser -- REST API --> Supabase Edge
    Supabase Edge -- Row-level Security Off --> PostgreSQL
    PostgreSQL -- 실시간 업데이트 --> Browser
```

* **데이터 모델(구현완료)**
  * `company_affiliate` : 계열사 마스터 테이블
  * `category` : 카테고리 마스터 테이블  
  * `opinion` : 의견 데이터 (계열사, 카테고리, 분기, 내용, 답변상태)

* **프런트** : Zustand(상태관리) + SWR 패턴으로 데이터 캐싱

---

## 기술 스택 & 인프라

| 레이어      | 선택 기술                                                    | 구현 상태 |
| -------- | -------------------------------------------------------- | ------- |
| **프런트**  | Next.js + TypeScript, Zustand(상태), TailwindCSS, Recharts | ✅ 완료 |
| **UI 컴포넌트** | shadcn/ui (Card, Button, Select, Form 등) | ✅ 완료 |
| **백엔드**  | Supabase REST API, Postgres 15 | ✅ 완료 |
| **호스팅**  | Vercel (프런트) / Supabase Cloud | 🔄 진행중 |
| **배포**   | GitHub Actions – main 병합 시 자동 CI/CD | 🔄 진행중 |
| **모니터링** | Supabase Logs + Sentry | 📋 예정 |

---

## 페이지 구조 (업데이트)

```
/ (대시보드 메인)
├─ 헤더 네비게이션
├─ 분기 선택 + 새로고침
├─ KPI 카드 (3개)
├─ 차트 섹션 (2개)
└─ 최근 의견 테이블

/submit (의견 등록)
├─ 헤더 네비게이션  
├─ 페이지 제목
├─ 의견 등록 폼
└─ 작성 안내 메시지

/opinions (전체 의견)
├─ 헤더 네비게이션
├─ 페이지 제목  
├─ 검색/필터 컨트롤
└─ 의견 목록 + 페이지네이션
```

---

## 일정·우선순위 (업데이트)

| Phase         | 기간(주)   | 핵심 산출물                     | 상태 |
| ------------- | ------- | -------------------------- | ---- |
| **0. 기획 확정**  | W0      | PRD 승인                     | ✅ 완료 |
| **1. 설계·세팅**  | W1 – W2 | 정보 구조, Supabase 스키마, CI 구축 | ✅ 완료 |
| **2. MVP 개발** | W3 – W6 | 4대 핵심 기능 완성, 반응형 UI        | ✅ 완료 |
| **3. 고도화** | W7 – W8 | 다중 페이지, 의견 등록, 전체 조회 | ✅ 완료 |
| **4. 배포·테스트** | W9      | 프로덕션 배포, QA 시트, 버그 수정 | 🔄 진행중 |
| **5. 런칭**     | W10     | 서비스 오픈, 지표 모니터링            | 📋 예정 |

---

## 현재 구현 완료 기능
- ✅ **대시보드 메인**: KPI 카드, 차트, 테이블, 새로고침
- ✅ **의견 등록**: 폼 검증, 제출, Toast 피드백  
- ✅ **전체 의견 조회**: 목록, 검색, 필터링, 모달
- ✅ **헤더 네비게이션**: 3개 페이지 연결, 반응형
- ✅ **상태 관리**: Zustand 기반 중앙집중식
- ✅ **에러 처리**: Toast 기반 사용자 피드백
- ✅ **반응형 디자인**: 모바일 친화적 UI

## 향후 개발 예정
- 📋 **프로덕션 배포**: Vercel + Supabase Cloud 연동
- 📋 **모니터링**: 에러 추적, 성능 지표
- 📋 **SEO 최적화**: 메타데이터, sitemap
- 📋 **접근성 개선**: 키보드 네비게이션, 스크린 리더

---

## 리스크 & 대응전략

| 리스크                  | 영향        | 대응                                         | 상태 |
| -------------------- | --------- | ------------------------------------------ | ---- |
| 실시간 데이터 지연           | 지표 신뢰도 저하 | Zustand 캐싱 + 새로고침 기능                      | ✅ 해결 |
| 브라우저 메모리 부하 (대량 데이터) | UX 느려짐    | 페이지네이션, 무한스크롤 구현                         | ✅ 해결 |
| 무권한 접근(공개 URL)       | 데이터 노출    | Supabase Row-Level Security 검토 필요          | 🔄 진행중 |
| 폼 검증 우회              | 잘못된 데이터   | 클라이언트 + 서버 이중 검증                          | ✅ 해결 |

---

## 부록

### A. 벤치마크
* Google Forms + Looker Studio: 빠른 구축 속도
* OfficeVibe Engage: 실시간 피드백·대시보드
* 현재 구현: 통합된 3페이지 구조로 사용성 개선

### B. 현재 UI/UX 특징
1. **일관된 헤더**: 모든 페이지에서 동일한 네비게이션
2. **그라데이션 배경**: neutral 톤의 브랜드 일관성  
3. **카드 기반 레이아웃**: shadcn/ui 디자인 시스템
4. **Toast 피드백**: 모든 액션에 대한 즉시 피드백
5. **반응형 그리드**: 모바일에서 1열, 데스크톱에서 다열 구조
